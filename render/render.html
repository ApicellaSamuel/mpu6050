<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <script src="raphael.js" type="text/javascript" charset="utf-8"></script>
    <script src="raphael3d.src.js" type="text/javascript" charset="utf-8"></script>
</head>
<body>
<script type="text/javascript" charset="utf-8">
    var scene = null;
    var viewer = null;
    var id;
    r = new XMLHttpRequest();

    function rotate(x, y, z){
        scene.camera.rotateX(x).rotateZ(y).rotateY(z);
        viewer.update();
    }

    function go(){

    }

    function stopTimer(){
        clearInterval(mainTimerID);
    }

    function getAngles(){
        if (r.readyState != 4 || r.status != 200) return;
        console.log(r.responseText);
    }

    window.onload = function() {
        var paper = Raphael('canvas', 400, 400);
        var mat = new Raphael3d.Material('#ff0', '#0ff');
        var cube = Raphael3d.Surface.Box(0., 0., 0., 2., 3., 0.2, paper, {});
        scene = new Raphael3d.Scene(paper);
        scene.setMaterial(mat).addSurfaces(cube);
        scene.projection = Raphael3d.Matrix4x4.PerspectiveMatrixZ(500);
        viewer = paper.Viewer(25, 25, 350, 350, {opacity: 0});
        viewer.setScene(scene).fit();
        scene.camera.rotateX(2.).rotateZ(-.2).rotateY(.5);
        viewer.update();

        r.open('GET', 'http://192.168.0.102:4567');
        r.setRequestHeader('Access-Control-Allow-Origin', '*');
        r.send();
        r.onreadystatechange = getAngles();

        mainTimerID = setInterval(go, 500);
        var canvas = document.getElementById('canvas');
        canvas.onclick = stopTimer;



    }
</script>
<div id="canvas"></div>
</body>
</html>